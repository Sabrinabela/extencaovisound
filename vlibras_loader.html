<!DOCTYPE html>
<html>
<head>
    <title>VLibras Loader TCC</title>
    <style>
        body { margin: 0; overflow: hidden; background-color: white; }
    </style>
    <script src="https://vlibras.gov.br/app/vlibras-plugin.js"></script>
</head>
<body>
    <div vw class="enabled">
        <div vw-access-button class="active"></div>
        <div vw-plugin-wrapper>
            <div class="vw-plugin-top-wrapper"></div>
        </div>
    </div>
    
    <script>
    // Inicializa o Widget do VLibras
    new window.VLibras.Widget('https://vlibras.gov.br/app');

    // Escuta por mensagens da extensão (postMessage)
    window.addEventListener('message', function(event) {
        // ⚠️ ATENÇÃO: É mais seguro verificar se a origem corresponde ao seu domínio ou ID de extensão
        // Mas por enquanto, vamos focar na lógica de tradução.
        
        if (event.data && event.data.action === 'translate') {
            const text = event.data.text;
            
            // 3. Tenta iniciar a tradução
            const startTranslation = () => {
                if (window.vlibras && window.vlibras.widget) {
                     window.vlibras.widget.startText(text);
                } else {
                    console.error("VLibras SDK não está pronto.");
                }
            };

            startTranslation();
            // Tenta novamente após um pequeno atraso, caso o SDK ainda esteja carregando
            // O carregamento do Unity pode levar alguns segundos.
            setTimeout(startTranslation, 2500); 
        }
    });
</script>
</body>
</html>